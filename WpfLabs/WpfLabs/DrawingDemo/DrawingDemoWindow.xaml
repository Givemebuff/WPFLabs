<Window x:Class="WpfLabs.DrawingDemo.DrawingDemoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:presentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
        xmlns:drawingDemo="clr-namespace:WpfLabs.DrawingDemo"
        xmlns:pathImage="clr-namespace:WpfLabs.DrawingDemo.PathImage"
        mc:Ignorable="d"
        x:Name="WindowContainer"
        Title="DrawingDemoWindow" Height="520" Width="500" Loaded="DrawingDemoWindow_OnLoaded">
    <Window.Resources>

        <GeometryDrawing x:Key="GeometryDrawing" x:Shared="false" Brush="Black">
            <GeometryDrawing.Geometry>
                <PathGeometry FillRule="Nonzero" Figures="M2871.09388,251 L2869.08285,251 L2869.08285,248 C2869.08285,244.134007 2872.23415,241 2876.12147,241 C2880.0088,241 2883.1601,244.134007 2883.1601,248 L2883.1601,251 L2881.14906,251 L2881.14906,248 C2881.14906,245.238576 2878.89813,243 2876.12147,243 C2873.34481,243 2871.09388,245.238576 2871.09388,248 L2871.09388,251 Z M2876.12147,259 C2875.28848,259 2874.6132,258.328427 2874.6132,257.5 C2874.6132,256.671573 2875.28848,256 2876.12147,256 C2876.95447,256 2877.62975,256.671573 2877.62975,257.5 C2877.62975,258.328427 2876.95447,259 2876.12147,259 Z M2882.40243,254.44746 C2882.32116,256.423197 2880.69374,258 2878.69804,258 L2875.1132,258 C2874.83705,258 2874.6132,257.776142 2874.6132,257.5 C2874.6132,257.223858 2874.83705,257 2875.1132,257 L2878.69804,257 C2880.1744,257 2881.37477,255.818376 2881.40503,254.349265 C2881.24986,254.221058 2881.15029,254.02267 2881.15029,253.8 L2881.15029,248.2 C2881.15029,247.813401 2881.45041,247.5 2881.82064,247.5 C2883.67174,247.5 2885.17236,249.067003 2885.17236,251 C2885.17236,252.725786 2883.97622,254.15984 2882.40243,254.44746 Z M2870.52409,247.5 C2870.89431,247.5 2871.19443,247.813401 2871.19443,248.2 L2871.19443,253.8 C2871.19443,254.186599 2870.89431,254.5 2870.52409,254.5 C2868.67298,254.5 2867.17236,252.932997 2867.17236,251 C2867.17236,249.067003 2868.67298,247.5 2870.52409,247.5 Z"></PathGeometry>
            </GeometryDrawing.Geometry>    
        </GeometryDrawing>
        <DrawingImage x:Key="DrawingImage" x:Shared="false" Drawing="{StaticResource GeometryDrawing}" presentationOptions:Freeze="True" />
        <drawingDemo:ControlRowConverter x:Key="ControlRowConverter" />
    </Window.Resources>
    <Grid x:Name="ContainerGrid" IsSharedSizeScope="True">
        <Grid.RowDefinitions>
            <RowDefinition x:Name="ControlRow" Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0">
            <!--宽-->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Label" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Content="宽：" HorizontalAlignment="Right" />
                <Label Grid.Column="1" Content="0" />
                <Slider Grid.Column="2" Maximum="{Binding ElementName=ContainerGrid, Path=ActualWidth}" Minimum="0"
                        Value="{Binding DrawingWidth}" />
                <Label Grid.Column="3" Content="{Binding ElementName=ContainerGrid, Path=ActualWidth}" />
            </Grid>
            <!--高-->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Label" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Content="高：" HorizontalAlignment="Right" />
                <Label Grid.Column="1" Content="0" />
                <Slider Grid.Column="2" Minimum="0" Value="{Binding DrawingHeight}">
                    <Slider.Maximum>
                        <MultiBinding Converter="{StaticResource ControlRowConverter}">
                            <Binding ElementName="ContainerGrid" Path="ActualHeight" />
                            <Binding ElementName="ControlRow" Path="Height" />
                        </MultiBinding>
                    </Slider.Maximum>
                </Slider>
                <Label Grid.Column="3">
                    <Label.Content>
                        <MultiBinding Converter="{StaticResource ControlRowConverter}">
                            <Binding ElementName="ContainerGrid" Path="ActualHeight" />
                            <Binding ElementName="ControlRow" Path="Height" />
                        </MultiBinding>
                    </Label.Content>
                </Label>
            </Grid>
            <!--边框-->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Label" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Content="边框：" HorizontalAlignment="Right" />
                <Label Grid.Column="1" Content="0" />
                <Slider Grid.Column="2" Minimum="0" Value="{Binding DrawingThickness}" Maximum="10" />
                <Label Grid.Column="3" Content="10" />
            </Grid>
            <!--半径-->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" SharedSizeGroup="Label" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Content="半径：" HorizontalAlignment="Right" />
                <Label Grid.Column="1" Content="0" />
                <Slider Grid.Column="2" Minimum="0" Value="{Binding Radii}" Maximum="15" />
                <Label Grid.Column="3" Content="15" />
            </Grid>
            <!--截屏-->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <RadioButton GroupName="ExtGroup" Content="JPG" IsChecked="True" VerticalAlignment="Center"
                             Checked="ExtRadioButton_OnChecked" />
                <RadioButton GroupName="ExtGroup" Content="PNG" IsChecked="False" VerticalAlignment="Center"
                             Checked="ExtRadioButton_OnChecked" />
                <RadioButton GroupName="ExtGroup" Content="BMP" IsChecked="False" VerticalAlignment="Center"
                             Checked="ExtRadioButton_OnChecked" />
                <Button Width="100" Content="截屏并打开" Margin="5,0" Click="SnapButton_OnClick" />
            </StackPanel>
        </StackPanel>
        <Border Grid.Row="1">
            <Grid x:Name="DrawingContainer">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Image Grid.Column="0" Source="{StaticResource DrawingImage}"
                       Width="{Binding ElementName=DrawingPath, Path=ActualWidth}"
                       Height="{Binding ElementName=DrawingPath, Path=ActualHeight}"
                       drawingDemo:PathImageHelper.ImageForeground="Red"/>
                <Image Grid.Column="1" Source="{StaticResource DrawingImage}"
                       Width="{Binding ElementName=DrawingPath, Path=ActualWidth}"
                       Height="{Binding ElementName=DrawingPath, Path=ActualHeight}"
                       drawingDemo:PathImageHelper.ImageForeground="Blue"/>
                <Path Grid.Column="0" Grid.ColumnSpan="2" x:Name="DrawingPath" HorizontalAlignment="Center" VerticalAlignment="Center" />
            </Grid>
        </Border>
    </Grid>
</Window>